점광원이란 ? : 자체 발광해서 주변에 영향을 주는 빛.

광원 세팅
-----------------
Light Type을 D3DLIGHT_POINT 라고 준다.

점광원은 방향을 가질 수 없고, '위치'를 갖는다.

점광원(구)의 범위(반지름)를 정해준다.

Attenuation(0~2) : 멀어질수록 어떻게 감쇠되어야 하는가.
0 : 선형
1 : 끝에서 급격하게 줄어듬
2 : 처음엔 그 색인데 초반부터 급격히 줄어듬
(이건 그냥 쉐이더로 처리해도 됨)
------------------
Light 클래스에서 조건문을 잡아서 Dir을 줄 지 말 지 정해야 한다.
LightAcc 쉐이더에서 패스를 늘려줘 점광원에 대한 패스를 만들어주자.

Renderer LightAcc의 BeginPass EndPass를 Light클래스로 옮겨주자.
점광원 쉐이더에서 LightDir 대신 점 광원에서 해당 픽셀을 바라보는 방향벡터를 구해주자.
월드 위치 구하는 계산 위치 변경

픽셀과의 Distance를 구해서 Range와 비교해 세기를 정해주자.

픽셀의 깊이는 Depth타겟의 A16B16G16R16F 때문에 물결 현상이 일어난다.

타겟에 색깔을 덮기 때문에 광원끼리 타겟에 블렌딩을 해줘야 한다 .
AlphaBlendEnable,
SrcBlend = one; // 
DestBlend = one; // 서로 색깔에 1:1로 더한다.

-----------------------------

이펙트를 부드럽게 하자

Effect 쉐이더에 Depth 샘플러를 받아오자.
그냥 UV좌표로 타겟과 비교하려하면 비교가 불가능 하다. (타겟은 화면사이즈의 UV와 같기 때문에.)

이펙트의 UV를 투영스페이스의 (-1,1 | 1,-1) UV를 구해 타겟의 UV ( 0,0 | 1,1 )로 치환해서 구할 수 있다.

VS에서 변환 후의 위치를 불러와 z나누기를 수행해서 투영스페이스상의 진짜 위치를 구할 수 있다. 

Effect에서 Target_Manager 선언해서 매니저에 있는 Depth타겟을 쉐이더로 넘겨줘야한다.
(SoftEffect)